<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>MENYRA – Restaurant Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#f3f4f6" />
  <link rel="stylesheet" href="../shared/styles.css">

  <style>
    /* Gate Overlay (wie Platform) */
    .m-gate{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: rgba(2,6,23,0.55);
      z-index: 9999;
      padding: 16px;
      backdrop-filter: blur(6px);
    }
    .m-gate-card{ width: min(520px, 100%); }

    /* Header rechts */
    .header-actions{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .user-pill{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(148,163,184,0.18);
      color:#0f172a;
    }
  </style>
</head>

<body>
  <main class="page">

    <!-- APP GATE -->
    <div class="m-gate" id="appGate">
      <section class="card m-gate-card">
        <h2>MENYRA</h2>
        <p class="info" id="appGateMsg">Checking session…</p>
      </section>
    </div>

    <!-- HEADER -->
    <header class="header" style="display:flex; gap:12px; align-items:flex-start;">
      <div>
        <div class="header-title">MENYRA</div>
        <div class="header-sub">Restaurant Admin – Speisekarte & Bestellungen</div>
      </div>

      <div class="header-actions">
        <span class="user-pill" id="ownerUserLabel" style="display:none;"></span>
        <button type="button" class="btn btn-ghost" id="ownerLogoutBtn" style="display:none;">Logout</button>
      </div>
    </header>

    <!-- PRODUKT-EDITOR -->
    <section class="card" id="menuEditorCard" style="display:none;">
      <h2>Produkt hinzufügen / bearbeiten</h2>
      <p class="info">
        Restaurant: <strong id="adminRestLabel"></strong>
      </p>

      <div class="tab-row" style="margin-top:10px; margin-bottom:10px;">
        <button type="button" class="tab-btn tab-btn-active type-toggle-btn" data-type="food" id="typeFoodBtn">
          Speisekarte
        </button>
        <button type="button" class="tab-btn type-toggle-btn" data-type="drink" id="typeDrinkBtn">
          Getränke
        </button>
      </div>

      <label style="display:block; margin-top:4px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Kategorie (Auswahl)</span>
        <select id="itemCategorySelect" class="input"></select>
      </label>

      <label style="display:block; margin-top:8px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Eigene Kategorie (optional)</span>
        <input id="itemCategoryCustomInput" class="input" placeholder='Eigene Kategorie, z.B. "Vegan"' />
      </label>

      <label style="display:block; margin-top:10px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Produktname</span>
        <input id="itemNameInput" class="input" placeholder="z.B. Burger Special" />
      </label>

      <label style="display:block; margin-top:8px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Beschreibung (lang, optional)</span>
        <textarea id="itemLongDescInput" class="input input-textarea" placeholder="Lange Beschreibung"></textarea>
      </label>

      <label style="display:block; margin-top:8px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Zutaten (optional)</span>
        <textarea id="itemDescInput" class="input input-textarea" placeholder="Zutaten, Allergene"></textarea>
      </label>

      <label style="display:block; margin-top:8px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Preis (€)</span>
        <input id="itemPriceInput" class="input" type="number" step="0.01" min="0" placeholder="z.B. 7.90" />
      </label>

      <label style="display:block; margin-top:8px;">
        <span style="font-size:0.8rem; display:block; margin-bottom:4px;">Bild-URLs (optional, eine pro Zeile)</span>
        <textarea id="itemImagesInput" class="input input-textarea" placeholder="https://bild1.jpg&#10;https://bild2.jpg"></textarea>
      </label>

      <div class="cart-actions" style="margin-top:12px;">
        <button type="button" class="btn btn-ghost" id="itemResetBtn">Zurücksetzen</button>
        <button type="button" class="btn btn-primary" id="itemSaveBtn">Produkt speichern</button>
      </div>

      <p id="adminItemStatus" class="status-text"></p>
    </section>

    <!-- PRODUKT-LISTE -->
    <section class="card" id="menuListCard" style="display:none;">
      <h2>Produkte (Speisen & Getränke)</h2>
      <div class="list" id="itemList"></div>
      <p class="info">Tippe auf <strong>Bearbeiten</strong> oder <strong>Verfügbar</strong>.</p>
    </section>

    <!-- HEUTIGE BESTELLUNGEN -->
    <section class="card" id="ordersCard" style="display:none;">
      <h2>Heutige Bestellungen</h2>
      <div class="list" id="adminOrdersList"></div>
      <p class="info">Bestellungen von heute aus <code>restaurants/&lt;ID&gt;/orders</code>.</p>
    </section>

  </main>

  <script type="module" src="./admin.js"></script>
</body>
</html>
